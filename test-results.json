{"numTotalTestSuites":11,"numPassedTestSuites":6,"numFailedTestSuites":5,"numPendingTestSuites":0,"numTotalTests":20,"numPassedTests":19,"numFailedTests":1,"numPendingTests":0,"numTodoTests":0,"startTime":1755947642266,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["","auth redirect helpers","normalizeInternalPath()"],"fullName":" auth redirect helpers normalizeInternalPath() keeps single leading slash and removes duplicates","status":"failed","title":"keeps single leading slash and removes duplicates","duration":10,"failureMessages":["expected '/' to be '/admin' // Object.is equality"],"location":{"line":14,"column":52}},{"ancestorTitles":["","auth redirect helpers","normalizeInternalPath()"],"fullName":" auth redirect helpers normalizeInternalPath() resolves dot segments","status":"passed","title":"resolves dot segments","duration":1,"failureMessages":[]},{"ancestorTitles":["","auth redirect helpers","normalizeInternalPath()"],"fullName":" auth redirect helpers normalizeInternalPath() rejects non-internal paths","status":"passed","title":"rejects non-internal paths","duration":0,"failureMessages":[]},{"ancestorTitles":["","auth redirect helpers","isSafeInternalPath()"],"fullName":" auth redirect helpers isSafeInternalPath() accepts safe internal paths","status":"passed","title":"accepts safe internal paths","duration":0,"failureMessages":[]},{"ancestorTitles":["","auth redirect helpers","isSafeInternalPath()"],"fullName":" auth redirect helpers isSafeInternalPath() rejects external, scheme or protocol-like, or double-slash","status":"passed","title":"rejects external, scheme or protocol-like, or double-slash","duration":1,"failureMessages":[]},{"ancestorTitles":["","auth redirect helpers","isAllowedForRole()"],"fullName":" auth redirect helpers isAllowedForRole() admin allowed everywhere","status":"passed","title":"admin allowed everywhere","duration":1,"failureMessages":[]},{"ancestorTitles":["","auth redirect helpers","isAllowedForRole()"],"fullName":" auth redirect helpers isAllowedForRole() customer cannot access admin namespace","status":"passed","title":"customer cannot access admin namespace","duration":0,"failureMessages":[]},{"ancestorTitles":["","auth redirect helpers","isAllowedForRole()"],"fullName":" auth redirect helpers isAllowedForRole() staff default denies /admin (can be adapted by business rule)","status":"passed","title":"staff default denies /admin (can be adapted by business rule)","duration":1,"failureMessages":[]},{"ancestorTitles":["","auth redirect helpers","decidePostAuthRedirect()"],"fullName":" auth redirect helpers decidePostAuthRedirect() role=admin returnUrl=undefined -> /admin (admin default to admin dashboard)","status":"passed","title":"role=admin returnUrl=undefined -> /admin (admin default to admin dashboard)","duration":0,"failureMessages":[]},{"ancestorTitles":["","auth redirect helpers","decidePostAuthRedirect()"],"fullName":" auth redirect helpers decidePostAuthRedirect() role=admin returnUrl=/ -> / (admin respects safe internal returnUrl)","status":"passed","title":"role=admin returnUrl=/ -> / (admin respects safe internal returnUrl)","duration":1,"failureMessages":[]},{"ancestorTitles":["","auth redirect helpers","decidePostAuthRedirect()"],"fullName":" auth redirect helpers decidePostAuthRedirect() role=admin returnUrl=/dashboard -> /dashboard (undefined)","status":"passed","title":"role=admin returnUrl=/dashboard -> /dashboard (undefined)","duration":0,"failureMessages":[]},{"ancestorTitles":["","auth redirect helpers","decidePostAuthRedirect()"],"fullName":" auth redirect helpers decidePostAuthRedirect() role=admin returnUrl=https://evil.com -> /admin (ignore external returnUrl)","status":"passed","title":"role=admin returnUrl=https://evil.com -> /admin (ignore external returnUrl)","duration":0,"failureMessages":[]},{"ancestorTitles":["","auth redirect helpers","decidePostAuthRedirect()"],"fullName":" auth redirect helpers decidePostAuthRedirect() role=customer returnUrl=undefined -> / (user default to home)","status":"passed","title":"role=customer returnUrl=undefined -> / (user default to home)","duration":0,"failureMessages":[]},{"ancestorTitles":["","auth redirect helpers","decidePostAuthRedirect()"],"fullName":" auth redirect helpers decidePostAuthRedirect() role=customer returnUrl=/dashboard -> /dashboard (undefined)","status":"passed","title":"role=customer returnUrl=/dashboard -> /dashboard (undefined)","duration":0,"failureMessages":[]},{"ancestorTitles":["","auth redirect helpers","decidePostAuthRedirect()"],"fullName":" auth redirect helpers decidePostAuthRedirect() role=customer returnUrl=/admin -> / (user not allowed to admin)","status":"passed","title":"role=customer returnUrl=/admin -> / (user not allowed to admin)","duration":0,"failureMessages":[]},{"ancestorTitles":["","auth redirect helpers","decidePostAuthRedirect()"],"fullName":" auth redirect helpers decidePostAuthRedirect() role=customer returnUrl=http://evil.com -> / (ignore external)","status":"passed","title":"role=customer returnUrl=http://evil.com -> / (ignore external)","duration":0,"failureMessages":[]},{"ancestorTitles":["","auth redirect helpers","decidePostAuthRedirect()"],"fullName":" auth redirect helpers decidePostAuthRedirect() role=null returnUrl=/admin -> / (unknown role treated as non-admin)","status":"passed","title":"role=null returnUrl=/admin -> / (unknown role treated as non-admin)","duration":0,"failureMessages":[]},{"ancestorTitles":["","auth redirect helpers","decidePostAuthRedirect()"],"fullName":" auth redirect helpers decidePostAuthRedirect() role=staff returnUrl=/admin -> / (staff default deny /admin by helper)","status":"passed","title":"role=staff returnUrl=/admin -> / (staff default deny /admin by helper)","duration":0,"failureMessages":[]},{"ancestorTitles":["","auth redirect helpers","decidePostAuthRedirect()"],"fullName":" auth redirect helpers decidePostAuthRedirect() role=staff returnUrl=/reports -> /reports (undefined)","status":"passed","title":"role=staff returnUrl=/reports -> /reports (undefined)","duration":0,"failureMessages":[]},{"ancestorTitles":["","auth redirect helpers","decidePostAuthRedirect()"],"fullName":" auth redirect helpers decidePostAuthRedirect() role=undefined returnUrl=/dashboard -> /dashboard (undefined)","status":"passed","title":"role=undefined returnUrl=/dashboard -> /dashboard (undefined)","duration":0,"failureMessages":[]}],"startTime":1755947643296,"endTime":1755947643314,"status":"failed","message":"","name":"/home/runner/work/dongusa-5dok/dongusa-5dok/tests/auth/redirect.test.ts"},{"assertionResults":[],"startTime":1755947642266,"endTime":1755947642266,"status":"failed","message":"Failed to resolve import \"@testing-library/react\" from \"tests/utils/test-helpers.tsx\". Does the file exist?","name":"/home/runner/work/dongusa-5dok/dongusa-5dok/tests/components/ProductCard.test.tsx"},{"assertionResults":[],"startTime":1755947642266,"endTime":1755947642266,"status":"failed","message":"Failed to resolve import \"server-only\" from \"lib/supabase/server.ts\". Does the file exist?","name":"/home/runner/work/dongusa-5dok/dongusa-5dok/tests/integration/auth-flow.test.ts"},{"assertionResults":[],"startTime":1755947642266,"endTime":1755947642266,"status":"failed","message":"Failed to resolve import \"@testing-library/react\" from \"tests/utils/test-helpers.tsx\". Does the file exist?","name":"/home/runner/work/dongusa-5dok/dongusa-5dok/tests/integration/ecommerce-flow.test.tsx"},{"assertionResults":[],"startTime":1755947642266,"endTime":1755947642266,"status":"failed","message":"Failed to resolve import \"server-only\" from \"lib/supabase/server.ts\". Does the file exist?","name":"/home/runner/work/dongusa-5dok/dongusa-5dok/tests/lib/auth-service.test.ts"},{"assertionResults":[],"startTime":1755947642266,"endTime":1755947642266,"status":"failed","message":"Failed to resolve import \"isomorphic-dompurify\" from \"lib/input-validation.ts\". Does the file exist?","name":"/home/runner/work/dongusa-5dok/dongusa-5dok/tests/security/security.test.ts"}]}